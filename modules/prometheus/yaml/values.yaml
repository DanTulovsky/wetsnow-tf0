# https://github.com/bitnami/charts/tree/master/bitnami/kube-prometheus
# fullnameOverride: prometheus0
operator:
  service:
    type: ClusterIP
    port: 8080
    clusterIP: None
  resources:
    limits:
      cpu: 100m
      memory: 256Mi
    requests:
      cpu: 10m
      memory: 128Mi
exporters:
  node-exporter:
    enabled: true
  kube-state-metrics:
    enabled: true
kubeControllerManager:
  enabled: true
  service:
    enabled: true
    port: 10257
    targetPort: 10257
  serviceMonitor:
    https: true
    insecureSkipVerify: true
kubeScheduler:
  service:
    enabled: true
    port: 10259
    targetPort: 10259
  serviceMonitor:
    https: true
    insecureSkipVerify: true
coreDns:
  service:
    enabled: true
prometheus:
  retention: 7d
  resources:
    limits:
      cpu: 250m
      memory: 1.5Gi
    requests:
      cpu: 20m
      memory: 1.0Gi
  tolerations:
    - key: "node-role.kubernetes.io/master"
      effect: "NoSchedule"
      operator: "Exists"
  service:
    type: ClusterIP
    port: 9090
    clusterIP: None
  persistence:
    enabled: true
    size: 8G
  volumes:
    - name: lightstep-config-volume
      secret:
        secretName: lightstep-config
  containers:
    - name: otel-sidecar
      image: lightstep/opentelemetry-prometheus-sidecar
      imagePullPolicy: Always
      args:
        - --config-file=/etc/lightstep/config.yaml
      volumeMounts:
        - name: prometheus-prom0-kube-prometheus-prometheus-db
          mountPath: /prometheus
          subPath: prometheus-db
        - name: lightstep-config-volume
          mountPath: /etc/lightstep
      resources:
        limits:
          cpu: 100m
          memory: 1024Mi
        requests:
          cpu: 100m
          memory: 512Mi
alertmanager:
  enabled: false
node-exporter:
  serviceMonitor:
    enabled: true
    jobLabel: jobLabel
    relabelings:
      - action: replace
        regex: (.*)
        replacement: $1
        sourceLabels:
          - __meta_kubernetes_pod_node_name
        targetLabel: kubernetes_node
  extraArgs:
    collector.filesystem.ignored-mount-points: "^/(dev|proc|sys|var/lib/docker/.+)($|/)"
    collector.filesystem.ignored-fs-types: "^(autofs|binfmt_misc|cgroup|configfs|debugfs|devpts|devtmpfs|fusectl|hugetlbfs|mqueue|overlay|proc|procfs|pstore|rpc_pipefs|securityfs|sysfs|tracefs)$"
    collector.systemd:
    collector.processes:
kubeProxy:
  enabled: true
kubelet:
  enabled: true
  namespace: kube-system
  serviceMonitor:
    metricRelabelings:
      - action: replace
        sourceLabels:
          - node
        targetLabel: instance
